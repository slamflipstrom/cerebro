{
  "collections": [
    {
      "name": "decks",
      "type": "base",
      "schema": [
        {
          "name": "name",
          "type": "text",
          "required": true
        },
        {
          "name": "description",
          "type": "text"
        },
        {
          "name": "user",
          "type": "relation",
          "required": true,
          "options": {
            "collectionId": "_pb_users_auth_",
            "cascadeDelete": true
          }
        }
      ],
      "indexes": [
        "CREATE INDEX idx_decks_user ON decks (user)"
      ]
    },
    {
      "name": "cards",
      "type": "base",
      "schema": [
        {
          "name": "deck",
          "type": "relation",
          "required": true,
          "options": {
            "collectionId": "decks",
            "cascadeDelete": true
          }
        },
        {
          "name": "front",
          "type": "text",
          "required": true
        },
        {
          "name": "back",
          "type": "text",
          "required": true
        },
        {
          "name": "tags",
          "type": "json"
        }
      ],
      "indexes": [
        "CREATE INDEX idx_cards_deck ON cards (deck)"
      ]
    },
    {
      "name": "reviews",
      "type": "base",
      "schema": [
        {
          "name": "card",
          "type": "relation",
          "required": true,
          "options": {
            "collectionId": "cards",
            "cascadeDelete": true
          }
        },
        {
          "name": "user",
          "type": "relation",
          "required": true,
          "options": {
            "collectionId": "_pb_users_auth_",
            "cascadeDelete": true
          }
        },
        {
          "name": "rating",
          "type": "number",
          "required": true,
          "options": {
            "min": 1,
            "max": 4
          }
        },
        {
          "name": "duration",
          "type": "number",
          "required": true
        }
      ],
      "indexes": [
        "CREATE INDEX idx_reviews_card ON reviews (card)",
        "CREATE INDEX idx_reviews_user ON reviews (user)",
        "CREATE INDEX idx_reviews_created ON reviews (created)"
      ]
    },
    {
      "name": "card_schedules",
      "type": "base",
      "schema": [
        {
          "name": "card",
          "type": "relation",
          "required": true,
          "options": {
            "collectionId": "cards",
            "cascadeDelete": true
          }
        },
        {
          "name": "due",
          "type": "date",
          "required": true
        },
        {
          "name": "stability",
          "type": "number",
          "required": true
        },
        {
          "name": "difficulty",
          "type": "number",
          "required": true
        },
        {
          "name": "elapsed_days",
          "type": "number",
          "required": true
        },
        {
          "name": "scheduled_days",
          "type": "number",
          "required": true
        },
        {
          "name": "reps",
          "type": "number",
          "required": true
        },
        {
          "name": "lapses",
          "type": "number",
          "required": true
        },
        {
          "name": "state",
          "type": "select",
          "required": true,
          "options": {
            "values": ["new", "learning", "review", "relearning"]
          }
        },
        {
          "name": "last_review",
          "type": "date"
        }
      ],
      "indexes": [
        "CREATE UNIQUE INDEX idx_card_schedules_card ON card_schedules (card)",
        "CREATE INDEX idx_card_schedules_due ON card_schedules (due)",
        "CREATE INDEX idx_card_schedules_state ON card_schedules (state)"
      ]
    }
  ]
}